<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>JARVIS File Sharing Terminal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='jarvis.css') }}">
</head>

<body>

<!-- Floating Holograms -->
<div class="holo" style="width:120px;height:120px;top:10%;left:5%;"></div>
<div class="holo" style="width:200px;height:200px;bottom:15%;right:10%;animation-delay:2s;"></div>

<!-- Iron Man Hologram -->
<div id="iron-holo">
    <img src="{{ url_for('static', filename='iron.gif') }}" alt="Iron Man Hologram">
</div>


<!-- Arc Reactor Loader -->
<div id="arc-loader" class="arc-hidden">
    <div class="arc-reactor">
        <div class="core"></div>
        <div class="ring ring1"></div>
        <div class="ring ring2"></div>
        <div class="ring ring3"></div>
    </div>
</div>

<!-- Typing Intro -->
<div class="typewriter">Initializing JARVIS File Sharing System...</div>

<h1>JARVIS File Sharing Terminal</h1>

<div class="container">

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="card">
        {% for m in messages %} <div>{{ m }}</div> {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <div class="card">
        <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data">
            <input type="file" name="file" required>
            <button type="submit">UPLOAD</button>
        </form>
    </div>

    <h2 style="text-shadow:0 0 10px #00eaff;">Recent Uploads</h2>

    {% for f in files %}
    <div class="card">
        <strong>{{ f[1] }}</strong><br>
        Link: <a href="{{ url_for('download_page', token=f[2]) }}">/f/{{ f[2] }}</a><br>
        Uploaded: {{ f[3] }}
    </div>
    {% else %}
    <div class="card">No files uploaded yet.</div>
    {% endfor %}
</div>

<!-- Arc Reactor Loader Script -->
<script>
const form = document.querySelector("form");
const loader = document.getElementById("arc-loader");

form.addEventListener("submit", () => {
    loader.classList.remove("arc-hidden");  

    const msg = new SpeechSynthesisUtterance(
        "Uploading file. Powering up the arc reactor."
    );
    msg.pitch = 1.3;
    msg.rate = 1.0;
    speechSynthesis.speak(msg);
});
</script>

<!-- Upload Success Voice -->
<script>
function speak(msg) {
    const t = new SpeechSynthesisUtterance(msg);
    t.pitch = 1.2;
    t.rate = 1.0;
    speechSynthesis.speak(t);
}

window.onload = () => {
    document.querySelectorAll(".card").forEach(card => {
        if (card.innerText.includes("uploaded")) {
            speak("File uploaded successfully sir.");
        }
    });
};
</script>

</body>
</html>